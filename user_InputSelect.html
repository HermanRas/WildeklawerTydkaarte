<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Start of App JS -->
    <script src="App/dbAPI.js"></script>
    <script src="App/app.js"></script>
    <!-- End Of App JS -->
    <script src="js/jquery-3.6.0.min.js"></script>
    <script>
        loadData('_header.html', '', 'HEAD');
    </script>
</head>

<body>
    <!-- NAV BAR -->
    <div id="nav">Loading... Menu Data</div>
    <script type="text/JavaScript">
            loadData('_nav.html','nav'); //load user nav
            $.getScript("app/navAdmin.js"); //load admin buttons if admin
        </script>

    <!-- Page Title -->
    <!-- Main Content -->

    <!-- 
    #################################################################
    ## show camera and Code if found
    #################################################################
    -->
    <h1 class="bg-success"><img style="height:1.5em;" src="Img/invoere.png" class="rounded m-1 p-1" alt="Invoer">Invoer
    </h1>
    <div class="container">
        <h3>Lees QR Kode</h3>
        <video style="max-width:300px; max-height:180px;display: block; margin: 0 auto;" id="qr-video"></video>
        <div id="cam-qr-result">scanning...</div>
    </div>

    <!-- Page Level Scripts -->
    <script type="module">
        //import plugins
        import QrScanner from "./js/qr-scanner.min.js";
        QrScanner.WORKER_PATH = './js/qr-scanner-worker.min.js';

        //set defaults
        const video = document.getElementById('qr-video');
        const camQrResult = document.getElementById('cam-qr-result');

        //run scan
        function setResult(label, result) {
            var cn = result.split("(");
            label.innerHTML = '<h4> Werker: <hr>' + result +
                ' gekies</h4><a href="user_InputData.html?User=' + cn[0] + '" class="btn btn-secondary">Stuur</a>';
        }

        // ####### Web Cam Scanning #######
        const scanner = new QrScanner(video, result => setResult(camQrResult, result));
        scanner.start();
        scanner.setInversionMode('original');
    </script>

    <!-- Footer -->
    <script>
        loadData('_footer.html', '', 'BODY');
    </script>
</body>

</html>